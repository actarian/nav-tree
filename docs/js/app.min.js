!function(){"use strict";angular.module("app",["ngRoute","jsonFormatter"])}(),function(){"use strict";angular.module("app").config(["$httpProvider",function(n){}])}(),function(){"use strict";angular.module("app").config(["$locationProvider",function(n){n.html5Mode(!1),n.hashPrefix("")}])}(),function(){"use strict";angular.module("app").run(["$rootScope",function(n){}])}(),function(){"use strict";angular.module("app").controller("RootCtrl",["$scope","$http","$timeout","$promise","Nav",function(n,t,e,a,o){function i(n){var t=n.url;return console.log("RootCtrl.onLink",n.$nav.level,t),t}function r(n){return console.log("RootCtrl.onNav",n.$nav.level,n.$nav.link),o.silent(n.$nav.link),!1}var u=new o({onLink:i,onNav:r});t.get("json/menu.js").then(function(n){u.setItems(n.data)},function(n){console.log("RootCtrl.error",n)}),n.nav=u}])}(),function(){"use strict";var n=angular.module("app");n.factory("Nav",["$silent",function(n){function t(n){var t=this,e={items:[]};angular.extend(t,e),n&&angular.extend(t,n),t.addNav(t,null)}t.prototype={addNav:function(n,t){var e=this,a={parent:t||null,level:t?t.$nav.level+1:0,state:{},addItems:function(t){e.addItems(t,n)},onNav:e.onNav};if(n.$nav=a,a.link=e.getLink(n),a.link===e.path)for(a.state.active=!0,a.state.opened=!0;a.parent;)a=a.parent.$nav,a.state.active=!0,a.state.opened=!0},getLink:function(n){return this.onLink?this.onLink(n,n.$nav):n.link},addItem:function(n,t){var e=this;e.onLink,e.onNav;e.addNav(n,t),t&&(t.items=t.items||[],t.items.push(n))},addItems:function(n,t){var e=this;angular.isArray(n)?angular.forEach(n,function(n){e.addItem(n,t)}):e.addItem(n,t)},parse:function(n,t){var e=this;n&&angular.forEach(n,function(n){e.addNav(n,t),e.parse(n.items,n)})},setItems:function(t){var e=this;e.path=n.path(),e.items=t,e.parse(t,e)}};var e={silent:function(t){n.silent(t)},path:function(t){n.path(t)}};return angular.extend(t,e),t}]),n.directive("nav",["$parse","Nav",function(n,t){return{restrict:"A",templateUrl:function(n,t){return t.template||"partials/nav/nav"},scope:{items:"=nav"},link:function(e,a,o,i){e.$watch("items",function(a){if(a)if(angular.isArray(a)){var i=n(o.onLink)(e.$parent),r=n(o.onNav)(e.$parent),u=new t({onLink:i,onNav:r});u.setItems(a),e.item=u}else a instanceof t&&(e.item=a)})}}}]),n.directive("navItem",["$timeout",function(n){return{restrict:"A",templateUrl:function(n,t){return t.template||"partials/nav/nav-item"},scope:{item:"=navItem"},link:function(t,e,a,o){function i(t,e){var a=t.$nav.state;a.active=!0,n(function(){a.immediate=e,a.closed=a.closing=!1,a.opening=!0,n(function(){a.opening=!1,a.opened=!0})})}function r(t,e){var a=t.$nav.state;a.active=!1,n(function(){a.immediate=e,a.opened=a.opening=!1,a.closing=!0,n(function(){a.closing=!1,a.closed=!0})}),t.items&&angular.forEach(t.items,function(n){r(n,!0)})}function u(n){var t=n.$nav.state;t.active=!n.items||!t.active,t.active?(n.$nav.parent&&angular.forEach(n.$nav.parent.items,function(t){t!==n&&r(t,!0)}),i(n)):r(n)}function c(e){function a(){n(function(){u(o)})}var o=t.item;if(o.$nav.state.active)m=!1,a();else if(o.$nav.onNav){var i=o.$nav.onNav(o,o.$nav);i&&"function"==typeof i.then?(i.then(function(n){a()},function(n){}),m=!1):(m=i,a())}}function s(n){c(n),d.off("mousedown",f)}function f(n){c(n),d.off("touchstart",s)}function l(n){return v(n)}function v(n){if(!1===m)return n.preventDefault(),!1}function p(){d.off("touchstart",s).off("mousedown",f).off("click",l)}var m,d=angular.element(e[0].querySelector(".nav-link"));!function(){d.on("touchstart",s).on("mousedown",f).on("click",l)}(),t.$on("$destroy",function(){p()})}}}]),n.factory("$silent",["$rootScope","$location",function(n,t){function e(){}function a(){var t=n.$$listeners.$locationChangeSuccess;angular.forEach(t,function(n,e){function a(){t[e]=n}n!==o&&(t[e]=a)})}function o(n){i===t.path()&&a(),i=null}var i,r={silent:function(n,e){var a=t.url(n);e&&a.replace(),i=t.path()},path:function(n){return t.path(n)}};return angular.extend(e,r),n.$$listeners.$locationChangeSuccess.unshift(o),e}])}(),function(){"use strict";angular.module("app").factory("$promise",["$q",function(n){function t(t){if("function"!=typeof t)throw"promise resolve callback missing";var e=n.defer();return t(e),e.promise}var e={all:function(t){return n.all(t)}};return angular.extend(t,e),t}])}();
//# sourceMappingURL=app.min.js.map
