!function(){"use strict";angular.module("app",["ngRoute","jsonFormatter"])}(),function(){"use strict";angular.module("app").config(["$httpProvider",function(n){}])}(),function(){"use strict";angular.module("app").config(["$locationProvider",function(n){n.html5Mode(!1),n.hashPrefix("")}])}(),function(){"use strict";angular.module("app").run(["$rootScope",function(n){}])}(),function(){"use strict";angular.module("app").controller("RootCtrl",["$scope","$http","$timeout","$promise","Nav",function(n,t,e,o,a){function i(n){var t=n.url;return console.log("RootCtrl.onLink",n.$nav.level,t),t}function r(n){return console.log("RootCtrl.onNav",n.$nav.level,n.$nav.link),!1}var u=new a({onLink:i,onNav:r});t.get("json/menu.js").then(function(n){u.setItems(n.data)},function(n){console.log("RootCtrl.error",n)}),n.nav=u}])}(),function(){"use strict";var n=angular.module("app");n.factory("Nav",function(){function n(n){var t=this,e={items:[]};angular.extend(t,e),n&&angular.extend(t,n),t.addNav(t,null)}return n.prototype={addNav:function(n,t){var e=this,o={parent:t||null,level:t?t.$nav.level+1:0,addItems:function(t){e.addItems(t,n)},onNav:e.onNav};n.$nav=o,o.link=e.getLink(n)},getLink:function(n){var t=null;return t=this.onLink?this.onLink(n,n.$nav):n.link,t=t||"#"},addItem:function(n,t){var e=this;e.onLink,e.onNav;e.addNav(n,t),t&&(t.items=t.items||[],t.items.push(n))},addItems:function(n,t){var e=this;angular.isArray(n)?angular.forEach(n,function(n){e.addItem(n,t)}):e.addItem(n,t)},parse:function(n,t){var e=this;n&&angular.forEach(n,function(n){e.addNav(n,t),e.parse(n.items,n)})},setItems:function(n){var t=this;t.items=n,t.parse(n,t)}},n}),n.directive("nav",["$parse","Nav",function(n,t){return{restrict:"A",templateUrl:function(n,t){return t.template||"partials/nav/nav"},scope:{items:"=nav"},link:function(e,o,a,i){e.$watch("items",function(o){if(o)if(angular.isArray(o)){var i=n(a.onLink)(e.$parent),r=n(a.onNav)(e.$parent),u=new t({onLink:i,onNav:r});u.setItems(o),e.item=u}else o instanceof t&&(e.item=o)})}}}]),n.directive("navItem",["$timeout",function(n){return{restrict:"A",templateUrl:function(n,t){return t.template||"partials/nav/nav-item"},scope:{item:"=navItem"},link:function(t,e,o,a){function i(t,e){var o=t.$nav.state;o.active=!0,n(function(){o.immediate=e,o.closed=o.closing=!1,o.opening=!0,n(function(){o.opening=!1,o.opened=!0})})}function r(t,e){var o=t.$nav.state;o.active=!1,n(function(){o.immediate=e,o.opened=o.opening=!1,o.closing=!0,n(function(){o.closing=!1,o.closed=!0})}),t.items&&angular.forEach(t.items,function(n){r(n,!0)})}function u(n){var t=n.$nav.state;t.active=!n.items||!t.active,t.active?(n.$nav.parent&&angular.forEach(n.$nav.parent.items,function(t){t!==n&&r(t,!0)}),i(n)):r(n)}function c(e){function o(){n(function(){u(a)})}var a=t.item;if(a.$nav.state.active)g=!1,o();else if(a.$nav.onNav){var i=a.$nav.onNav(a,a.$nav);i&&"function"==typeof i.then?(i.then(function(n){o()},function(n){}),g=!1):(g=i,o())}}function s(n){c(n),p.off("mousedown",f)}function f(n){c(n),p.off("touchstart",s)}function l(n){return v(n)}function v(n){if(!1===g)return n.preventDefault(),!1}function m(){p.off("touchstart",s).off("mousedown",f).off("click",l)}var p=angular.element(e[0].querySelector(".nav-link")),d={};t.item.$nav.state=d;var g;!function(){p.on("touchstart",s).on("mousedown",f).on("click",l)}(),t.$on("$destroy",function(){m()})}}}])}(),function(){"use strict";angular.module("app").factory("$promise",["$q",function(n){function t(t){if("function"!=typeof t)throw"promise resolve callback missing";var e=n.defer();return t(e),e.promise}return t}])}();
//# sourceMappingURL=app.min.js.map
